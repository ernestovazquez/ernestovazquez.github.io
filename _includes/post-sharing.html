<!--
 Post sharing snippet

 v2.1
 https://github.com/cotes2020/jekyll-theme-chirpy
 © 2019 Cotes Chung
 Published under the MIT License
-->

<div class="share-wrapper">
  <span class="share-label text-muted mr-1">{{ site.data.share.label }}</span>
  <span class="share-icons">
    {% capture title %}{{ page.title }} - {{ site.title }}{% endcapture %}
    {% assign url = page.url | relative_url | prepend: site.url %}

    {% for share in site.data.share.platforms %}
      {% assign link = share.link | replace: 'TITLE', title | replace: 'URL', url %}
        <a href="{{ link }}" data-toggle="tooltip" data-placement="top"
          title="{{ share.type }}" target="_blank">
          <i class="fa-fw {{ share.icon }}"></i>
        </a>
    {% endfor %}

    <i class="fa-fw fas fa-link small" onclick="copyLink()"
        data-toggle="tooltip" data-placement="top" title="Copy link"
        style="cursor: pointer;"></i>

  </span>
</div>

<script>
  function copyLink() {
    // Copiar la URL al portapapeles
    const url = window.location.href;
    const tempInput = document.createElement('input');
    tempInput.value = url;
    document.body.appendChild(tempInput);
    tempInput.select();
    document.execCommand('copy');
    document.body.removeChild(tempInput);

    // Cambiar el título del ícono
    const icon = document.querySelector('.fa-link');
    if (icon) {
      const originalTitle = icon.getAttribute('title'); // Guardar el título original
      icon.setAttribute('title', 'Copiado exitosamente');
      
      // Mostrar el tooltip de Bootstrap (si estás usando Bootstrap)
      if (typeof $(document).ready === 'function' && typeof $.fn.tooltip === 'function') {
        $(icon).tooltip('update');
      }

      // Restablecer el título después de 2 segundos
      setTimeout(() => {
        icon.setAttribute('title', originalTitle);
        if (typeof $(document).ready === 'function' && typeof $.fn.tooltip === 'function') {
          $(icon).tooltip('update');
        }
      }, 2000);
    }
  }
</script>

